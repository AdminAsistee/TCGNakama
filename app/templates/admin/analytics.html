<!DOCTYPE html>
<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Vault Intelligence Briefing</title>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link
        href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&amp;family=Noto+Sans:wght@400;500;700&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#257bf4",
                        "background-light": "#f5f7f8",
                        "background-dark": "#0A0A0A",
                        "surface-dark": "#121212",
                        "glass": "rgba(255, 255, 255, 0.03)",
                        "glass-border": "rgba(255, 255, 255, 0.1)",
                        "neon-blue": "#00f0ff",
                        "neon-purple": "#bc13fe",
                        "neon-green": "#0bda5e",
                        "neon-gold": "#ffd700",
                        "danger-red": "#ff2a6d",
                        "obsidian-black": "#000000",
                        "teal-accent": "#00f2ea",
                    },
                    fontFamily: {
                        "display": ["Space Grotesk", "sans-serif"],
                        "body": ["Noto Sans", "sans-serif"],
                    },
                    boxShadow: {
                        'neon-blue': '0 0 10px rgba(0, 240, 255, 0.3), 0 0 20px rgba(0, 240, 255, 0.1)',
                    }
                },
            },
        }
    </script>
    <style>
        .glass-panel {
            background: rgba(18, 18, 18, 0.7);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }
    </style>
</head>

<body
    class="bg-background-light dark:bg-background-dark font-display text-white selection:bg-primary selection:text-white pb-24">
    <header class="sticky top-0 z-50 glass-panel border-b border-glass-border">
        <div class="grid grid-cols-[1fr_auto_1fr] items-center h-16 px-4">
            <div class="flex justify-start">
                <button onclick="window.location.href='/admin'"
                    class="group flex items-center gap-2 pl-1.5 pr-3 py-1.5 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 hover:border-neon-blue/30 transition-all backdrop-blur-md shadow-[0_4px_20px_rgba(0,0,0,0.2)]">
                    <div
                        class="flex items-center justify-center w-6 h-6 rounded-md bg-gradient-to-br from-white/5 to-transparent border border-white/5 group-hover:border-neon-blue/50 transition-colors">
                        <span
                            class="material-symbols-outlined text-sm bg-gradient-to-tr from-neon-blue via-teal-accent to-neon-purple bg-clip-text text-transparent group-hover:-translate-x-0.5 transition-transform">arrow_back</span>
                    </div>
                    <div class="flex flex-col items-start">
                        <span
                            class="text-[7px] font-bold uppercase tracking-widest text-white/40 leading-none mb-0.5">Back
                            to</span>
                        <span
                            class="text-[9px] font-bold uppercase tracking-widest text-white/90 group-hover:text-neon-blue transition-colors leading-none">Vault</span>
                    </div>
                </button>
            </div>
            <div class="flex justify-center">
                <h1
                    class="text-sm font-bold tracking-[0.15em] text-center uppercase text-transparent bg-clip-text bg-gradient-to-r from-white via-blue-100 to-white drop-shadow-[0_0_10px_rgba(255,255,255,0.2)] whitespace-nowrap">
                    Vault Intelligence
                </h1>
            </div>
            <div class="flex justify-end">
                <a href="/admin/logout"
                    class="flex items-center gap-1 text-danger-red text-[10px] uppercase tracking-wider font-bold border border-danger-red/30 px-2 py-1 rounded hover:bg-danger-red/10 transition-colors">
                    <span class="material-symbols-outlined text-sm">logout</span>
                    Logout
                </a>
            </div>
        </div>
    </header>

    <main class="flex flex-col gap-6 p-4">
        <!-- PSA 10 Grading Candidates -->
        <section>
            <h2 class="text-xs font-bold tracking-[0.2em] text-white/50 uppercase mb-3 px-1 flex items-center gap-2">
                <span class="material-symbols-outlined text-neon-gold text-sm">emoji_events</span>
                PSA 10 Grading Candidates
            </h2>
            <div class="glass-panel rounded-xl p-4">
                {% if psa_candidates and psa_candidates|length > 0 %}
                <div class="space-y-3">
                    {% for card in psa_candidates %}
                    <div class="flex items-center gap-3 p-3 bg-white/5 rounded-lg border border-white/10">
                        <div class="text-2xl font-bold text-neon-gold w-8 text-center">{{ loop.index }}</div>
                        <div class="flex-1">
                            <div class="text-sm font-bold text-white line-clamp-1">{{ card.title }}</div>
                            <div class="flex items-center gap-4 mt-1">
                                <span
                                    class="text-[10px] uppercase tracking-wider {% if card.grade == 'S' %}text-neon-gold{% elif card.grade == 'A' %}text-neon-green{% else %}text-white/50{% endif %}">
                                    Grade: {{ card.grade or '--' }}
                                </span>
                                <span class="text-[10px] text-white/50">Value: ¥{{ card.price }}</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-sm font-mono font-bold text-neon-green">{{ card.score }}%</div>
                            <div class="text-[10px] text-white/40">Score</div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="text-center py-8 text-white/30">
                    <span class="material-symbols-outlined text-4xl block mb-2">grade</span>
                    <p class="text-sm">No grading candidates yet</p>
                    <p class="text-xs text-white/20 mt-1">Assign grades to cards in the Vault</p>
                </div>
                {% endif %}
            </div>
        </section>

        <!-- Customer Behavior -->
        <section>
            <h2 class="text-xs font-bold tracking-[0.2em] text-white/50 uppercase mb-3 px-1 flex items-center gap-2">
                <span class="material-symbols-outlined text-neon-blue text-sm">public</span>
                Customer Behavior
            </h2>
            <div class="grid grid-cols-2 gap-3">
                <!-- Top Countries -->
                <div class="glass-panel rounded-xl p-4">
                    <h3 class="text-[10px] font-bold uppercase tracking-wider text-white/40 mb-3">Top Countries</h3>
                    {% if countries and countries|length > 0 %}
                    <div class="space-y-2">
                        {% for country in countries[:5] %}
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-white">{{ country.name }}</span>
                            <span class="text-xs font-mono text-neon-blue">{{ country.count }}</span>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <div class="text-center py-4 text-white/30">
                        <span class="material-symbols-outlined text-2xl">location_off</span>
                        <p class="text-xs mt-1">Connect Shopify</p>
                    </div>
                    {% endif %}
                </div>
                <!-- Top Spenders -->
                <div class="glass-panel rounded-xl p-4">
                    <h3 class="text-[10px] font-bold uppercase tracking-wider text-white/40 mb-3">Top Spenders</h3>
                    {% if top_spenders and top_spenders|length > 0 %}
                    <div class="space-y-2">
                        {% for spender in top_spenders[:5] %}
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-white line-clamp-1 max-w-[80px]">{{ spender.name }}</span>
                            <span class="text-xs font-mono text-neon-green">¥{{ spender.total }}</span>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <div class="text-center py-4 text-white/30">
                        <span class="material-symbols-outlined text-2xl">person_off</span>
                        <p class="text-xs mt-1">Connect Shopify</p>
                    </div>
                    {% endif %}
                </div>
            </div>
        </section>

        <!-- Trending Searches -->
        <section>
            <h2 class="text-xs font-bold tracking-[0.2em] text-white/50 uppercase mb-3 px-1 flex items-center gap-2">
                <span class="material-symbols-outlined text-neon-purple text-sm">trending_up</span>
                Trending Searches (Last 30 Days)
            </h2>
            <div class="glass-panel rounded-xl p-4">
                {% if trending_searches and trending_searches|length > 0 %}
                <div class="flex flex-wrap gap-2">
                    {% for search in trending_searches %}
                    <div
                        class="flex items-center gap-2 px-3 py-1.5 bg-neon-purple/10 border border-neon-purple/30 rounded-full">
                        <span class="text-sm text-neon-purple">{{ search.query }}</span>
                        <span class="text-xs font-mono text-white/50">{{ search.count }}x</span>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="text-center py-8 text-white/30">
                    <span class="material-symbols-outlined text-4xl block mb-2">search_off</span>
                    <p class="text-sm">No search data yet</p>
                    <p class="text-xs text-white/20 mt-1">Searches will appear as customers use the store</p>
                </div>
                {% endif %}
            </div>
        </section>

        <!-- Cards Sold Together -->
        <section>
            <h2 class="text-xs font-bold tracking-[0.2em] text-white/50 uppercase mb-3 px-1 flex items-center gap-2">
                <span class="material-symbols-outlined text-teal-accent text-sm">join</span>
                Cards Sold Together
            </h2>
            <div class="glass-panel rounded-xl p-4">
                {% if bundles and bundles|length > 0 %}
                <div class="space-y-3">
                    {% for bundle in bundles %}
                    <div class="flex items-center gap-3 p-3 bg-white/5 rounded-lg">
                        <div class="flex-1">
                            <div class="text-sm text-white">{{ bundle.product1 }}</div>
                            <div class="text-[10px] text-white/40">sold together with</div>
                            <div class="text-sm text-white">{{ bundle.product2 }}</div>
                        </div>
                        <div class="text-right">
                            <div class="text-lg font-mono font-bold text-teal-accent">{{ bundle.count }}x</div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="text-center py-8 text-white/30">
                    <span class="material-symbols-outlined text-4xl block mb-2">shopping_cart</span>
                    <p class="text-sm">No bundle data yet</p>
                    <p class="text-xs text-white/20 mt-1">Connect Shopify to analyze order patterns</p>
                </div>
                {% endif %}
            </div>
        </section>

        <!-- Summary Stats -->
        <section class="grid grid-cols-3 gap-3">
            <div class="glass-panel rounded-xl p-4 text-center">
                <div class="text-2xl font-mono font-bold text-white">{{ products|length }}</div>
                <div class="text-[10px] uppercase tracking-wider text-white/40">Products</div>
            </div>
            <div class="glass-panel rounded-xl p-4 text-center">
                <div class="text-2xl font-mono font-bold text-neon-green">{{ total_graded or 0 }}</div>
                <div class="text-[10px] uppercase tracking-wider text-white/40">Graded</div>
            </div>
            <div class="glass-panel rounded-xl p-4 text-center">
                <div class="text-2xl font-mono font-bold text-neon-purple">{{ trending_searches|length }}</div>
                <div class="text-[10px] uppercase tracking-wider text-white/40">Searches</div>
            </div>
        </section>
    </main>

    <nav
        class="fixed bottom-0 left-0 right-0 glass-panel border-t border-glass-border pb-safe pt-2 px-6 z-50 rounded-t-2xl">
        <div class="flex justify-between items-center h-16 max-w-md mx-auto">
            <button onclick="window.location.href='/admin'"
                class="flex flex-col items-center gap-1 text-white/40 hover:text-white transition-colors group">
                <span
                    class="material-symbols-outlined group-hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.8)] transition-all">grid_view</span>
                <span class="text-[10px] font-bold uppercase tracking-wider">Vault</span>
            </button>
            <button onclick="window.location.href='/admin/add-card'"
                class="flex flex-col items-center gap-1 text-white/40 hover:text-white transition-colors group">
                <span
                    class="material-symbols-outlined group-hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.8)] transition-all">add_circle</span>
                <span class="text-[10px] font-bold uppercase tracking-wider">Add Card</span>
            </button>
            <button class="flex flex-col items-center gap-1 text-primary group">
                <span
                    class="material-symbols-outlined group-hover:drop-shadow-[0_0_8px_rgba(37,123,244,0.8)] transition-all">monitoring</span>
                <span class="text-[10px] font-bold uppercase tracking-wider">Analytics</span>
            </button>
            <button class="flex flex-col items-center gap-1 text-white/40 hover:text-white transition-colors group">
                <span
                    class="material-symbols-outlined group-hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.8)] transition-all">settings</span>
                <span class="text-[10px] font-bold uppercase tracking-wider">Settings</span>
            </button>
        </div>
    </nav>
</body>

</html>